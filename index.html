
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Activity Table</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      table-layout: fixed;
    }
    th, td {
      border: 1px solid #999;
      padding: 8px;
      text-align: center;
      word-wrap: break-word;
    }
    input, textarea {
      width: 100%;
      padding: 6px;
      margin-bottom: 10px;
    }
    .form-container {
      max-width: 800px;
      margin: auto;
    }
    .action-btn {
      padding: 4px 10px;
      margin: 0 2px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="form-container">
    <h2>Add Activity</h2>
    <input type="text" id="activity" placeholder="Activity">
    <input type="text" id="equip" placeholder="Equip">
    <input type="text" id="model" placeholder="Model">
    <input type="datetime-local" id="downtime" placeholder="Downtime">
    <input type="text" id="compCode" placeholder="Comp Code">
    <input type="text" id="resp" placeholder="Resp">
    <textarea id="remaks" placeholder="Remaks"></textarea>
    <input type="datetime-local" id="estRfu" placeholder="Est RFU">
    <button onclick="addRow()">Add</button>
  </div>

  <table id="activityTable">
    <thead>
      <tr>
        <th style="width: 5%;">No</th>
        <th style="width: 10%;">Activity</th>
        <th style="width: 10%;">Equip</th>
        <th style="width: 10%;">Model</th>
        <th style="width: 13%;">Downtime</th>
        <th style="width: 10%;">Comp Code</th>
        <th style="width: 10%;">Resp</th>
        <th style="width: 12%;">Remaks</th>
        <th style="width: 13%;">Est RFU</th>
        <th style="width: 7%;">Aging (H)</th>
        <th style="width: 10%;">Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    function calculateAging(downtime) {
      const now = new Date();
      const dt = new Date(downtime);
      const diff = now - dt;
      return (diff / (1000 * 60 * 60)).toFixed(1); // in hours
    }

    function addRow() {
      const activity = $('#activity').val();
      const equip = $('#equip').val();
      const model = $('#model').val();
      const downtime = $('#downtime').val();
      const compCode = $('#compCode').val();
      const resp = $('#resp').val();
      const remaks = $('#remaks').val().replace(/
/g, '<br>');
      const estRfu = $('#estRfu').val();
      const aging = calculateAging(downtime);

      if (!activity || !equip || !downtime) {
        alert("Please fill required fields!");
        return;
      }

      const index = $('#activityTable tbody tr').length + 1;
      const row = `
        <tr>
          <td>${index}</td>
          <td>${activity}</td>
          <td>${equip}</td>
          <td>${model}</td>
          <td>${downtime}</td>
          <td>${compCode}</td>
          <td>${resp}</td>
          <td>${remaks}</td>
          <td>${estRfu}</td>
          <td>${aging}</td>
          <td>
            <button class="action-btn" onclick="editRow(this)">Edit</button>
            <button class="action-btn" onclick="deleteRow(this)">Delete</button>
          </td>
        </tr>`;
      $('#activityTable tbody').append(row);
      $('input, textarea').val('');
    }

    function deleteRow(btn) {
      $(btn).closest('tr').remove();
      renumberRows();
    }

    function editRow(btn) {
      const row = $(btn).closest('tr');
      const cells = row.children('td');
      $('#activity').val(cells.eq(1).text());
      $('#equip').val(cells.eq(2).text());
      $('#model').val(cells.eq(3).text());
      $('#downtime').val(cells.eq(4).text());
      $('#compCode').val(cells.eq(5).text());
      $('#resp').val(cells.eq(6).text());
      $('#remaks').val(cells.eq(7).html().replace(/<br>/g, '\n'));
      $('#estRfu').val(cells.eq(8).text());
      row.remove();
      renumberRows();
    }

    function renumberRows() {
      $('#activityTable tbody tr').each(function(index) {
        $(this).children('td').eq(0).text(index + 1);
      });
    }
  </script>
</body>
</html>
